<div class="container mt-4">
  {{> navbar isSalesPage=true}}
  <div class="d-flex justify-content-between align-items-center mt-4">
    <div>
      <h1 class="display-4">Sales Analytics</h1>
      <p class="lead">Track your business performance <span class="badge bg-primary bg-opacity-10 text-primary rounded-pill px-3 py-2 ms-2"><i class="bi bi-graph-up me-1"></i>Sales Overview</span></p>
    </div>
    <div>
      <button class="btn btn-outline-secondary rounded-pill me-2" onclick="window.history.back()">
        <i class="bi bi-arrow-left"></i> Back
      </button>
    </div>
  </div>

  <section class="sales-analytics my-5">
    <div class="row g-4">
      <!-- Revenue Card -->
      <div class="col-md-4">
        <div class="card shadow border-0 h-100 hover-lift">
          <div class="card-body" style="background: linear-gradient(135deg, #10b981, #059669); color: white; border-radius: 0.75rem;">
            <div class="d-flex justify-content-between align-items-center mb-3">
              <h5 class="card-title mb-0 fw-bold">Total Revenue</h5>
              <div class="icon-circle bg-white bg-opacity-25 pulse-light">
                <i class="bi bi-currency-dollar fs-4 text-white"></i>
              </div>
            </div>
            <h2 class="display-5 fw-bold mb-2">${{#if stats.revenue}}{{stats.revenue}}{{else}}0{{/if}}</h2>
            <p class="card-text mb-0 opacity-75">Overall earnings</p>
          </div>
        </div>
      </div>

      <!-- Orders Card -->
      <div class="col-md-4">
        <div class="card shadow border-0 h-100 hover-lift">
          <div class="card-body" style="background: linear-gradient(135deg, #3b82f6, #2563eb); color: white; border-radius: 0.75rem;">
            <div class="d-flex justify-content-between align-items-center mb-3">
              <h5 class="card-title mb-0 fw-bold">Total Orders</h5>
              <div class="icon-circle bg-white bg-opacity-25 pulse-light">
                <i class="bi bi-cart-check fs-4 text-white"></i>
              </div>
            </div>
            <h2 class="display-5 fw-bold mb-2">{{#if stats.totalOrders}}{{stats.totalOrders}}{{else}}0{{/if}}</h2>
            <p class="card-text mb-0 opacity-75">Processed orders</p>
          </div>
        </div>
      </div>

      <!-- Pending Orders Card -->
      <div class="col-md-4">
        <div class="card shadow border-0 h-100 hover-lift">
          <div class="card-body" style="background: linear-gradient(135deg, #f59e0b, #d97706); color: white; border-radius: 0.75rem;">
            <div class="d-flex justify-content-between align-items-center mb-3">
              <h5 class="card-title mb-0 fw-bold">Pending Orders</h5>
              <div class="icon-circle bg-white bg-opacity-25 pulse-light">
                <i class="bi bi-clock-history fs-4 text-white"></i>
              </div>
            </div>
            <h2 class="display-5 fw-bold mb-2">{{#if stats.pendingOrders}}{{stats.pendingOrders}}{{else}}0{{/if}}</h2>
            <p class="card-text mb-0 opacity-75">Awaiting processing</p>
          </div>
        </div>
      </div>
    </div>
  </section>
</div>

<script>
// Add click event listeners to all navbar links for debugging
document.addEventListener('DOMContentLoaded', function() {
  const navLinks = document.querySelectorAll('.navbar-nav .nav-link');
  
  // Fix any links that might be missing href attributes
  navLinks.forEach(link => {
    // Log the link for debugging
    console.log('Link found:', link.textContent.trim(), 'href:', link.getAttribute('href'));
    
    // Add click event listener
    link.addEventListener('click', function(e) {
      console.log('Link clicked:', this.textContent.trim(), 'href:', this.getAttribute('href'));
      
      // If the link doesn't have a proper href attribute, fix it
      if (!this.href || this.href === '#' || this.href === 'javascript:void(0)' || this.href.includes('javascript:void(0)')) {
        console.error('Link has invalid href:', this.textContent.trim());
        
        // Fix the href based on the link text
        if (this.textContent.includes('Dashboard')) {
          this.href = '/admin/dashboard';
          console.log('Fixed Dashboard link');
        } else if (this.textContent.includes('Products')) {
          this.href = '/admin/products';
          console.log('Fixed Products link');
        } else if (this.textContent.includes('Users')) {
          this.href = '/admin/users';
          console.log('Fixed Users link');
        } else if (this.textContent.includes('Sales')) {
          this.href = '/admin/sales';
          console.log('Fixed Sales link');
        } else if (this.textContent.includes('Orders')) {
          this.href = '/admin/orders';
          console.log('Fixed Orders link');
        }
      }
    });
  });
});
</script>